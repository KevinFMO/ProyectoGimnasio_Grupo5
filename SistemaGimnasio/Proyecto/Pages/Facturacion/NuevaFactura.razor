@page "/NuevaFactura"

<AuthorizeView Roles="Administrador, Usuario">
    <Authorized Context="AuthenticationState">

        <EditForm Model="@factura">
            <div class="rz-card card" style="width: 100%">
                <div class="form-group row">
                    <div class="col-md-3">
                        <b>Fecha:</b>
                        <RadzenDatePicker @bind-Value=@factura.Fecha DateFormat="d" Class="w-100" />
                    </div>
                    <div class="col-md-3">
                        <b>Fecha de Vencimiento:</b>
                        <RadzenDatePicker @bind-Value=@factura.FechaVencimiento DateFormat="d" Class="w-100" />
                    </div>
                    <div class="col-md-6">
                        <b>Cliente:</b>
                        <InputText id="Cliente" class="form-control" @bind-Value="factura.Cliente" />
                    </div>

                </div>
                
                <div class="form-group row">
                        <div class="col-md-3">
                            <b>Código Servicio:</b>
                            <InputText id="Codigo" class="form-control" @bind-value="codigoServicio"  ValueExpression="@( () => @codigoServicio)" @onkeypress="@BuscarServicio" />
                        </div>
                        <div class="col-md-6">
                            <b>Servicio:</b>					
                            <InputText readonly id="Descripcion" class="form-control" @bind-value="@service.Descripcion" ValueExpression="@( () => @service.Descripcion)" />
                        </div>

                        <div class="col-md-2">
                            <b>Seleccione el tiempo:</b>
					        <InputSelect class="form-control" @bind-Value="service.Tiempo">
						        @foreach (var tiempo in Enum.GetValues(typeof(TipoPrecio)))
						        {
							        <option value="@tiempo">@tiempo</option>
						        }
					        </InputSelect>
					        <ValidationMessage For="@(() => service.Tiempo)" />
				        </div>

                        <div class="col-md-1">
                            <b>Agregar</b>
                            <input type="submit" class="btn btn-primary" value="Agregar" @onclick="AgregarServicio" />
                        </div>
                </div>
            </div>
            <br/>

            <table class="table">
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Servicio</th>
                        <th>Tiempo</th>
                        <th>Precio</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var det in listaDetalleFactura)
                    {
                        <tr>
                            <td>@det.CodigoServicio</td>
                            <td>@det.Servicio</td>
                            <td>@det.Tiempo</td>
                            <td>@det.Precio</td>
                            <td>@det.Total</td>
                        </tr>
                    }
                </tbody>
            </table>

            <br/>
            

        </EditForm>

       
    </Authorized>
</AuthorizeView>

